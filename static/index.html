<!DOCTYPE html>
<html><head>
<title>Ratio Up</title>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="css/bulma.min.css"/>
<link rel="stylesheet" href="css/bulma-dark.min.css"/>
<link rel="stylesheet" href="css/materialdesignicons.min.css">
<style>
.c1{width:5em;}
.c2{width:7em;}
.c3{width:8em;}
</style>
</head><body class="has-navbar-fixed-top">
<nav id="top" class="navbar is-fixed-top">
    <div class="navbar-brand">
        <div class="navbar-item" alt="Ratio Up">RatioUp</div>
        <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navtop"><span aria-hidden="true"></span><span aria-hidden="true"></span><span aria-hidden="true"></span></a>
      </div>
      <div id="navtop" class="navbar-menu"><div class="navbar-start">
        <div class="navbar-item field"></div>
      </div><div class="navbar-end">
        <span class="navbar-item" id="server-status">Running</span>
        <a class="navbar-item" href="javascript:start_stop()" title="Start/stop the service"><i class="mdi mdi-play-circle mdi-24px"></i></a>
        <a class="navbar-item" href="javascript:configuration()" title="Configuration"><i class="mdi mdi-wrench mdi-24px"></i></a>
      </div></div>
</nav>
<div>
  <table class="table is-striped is-hoverable is-fullwidth"><thead><tr>
    <th><i class="mdi mdi-label"></i> Title</th>
    <th class="c2"><i class="mdi mdi-harddisk"></i> Size</th>
    <th class="c3" title="Current upload speed"><i class="mdi mdi-upload-network" title="Overall upload speed"></i> <strong id="Overall upload speed">123 kB/s</strong></th>
    <th class="c1" title="Seeders"><i class="mdi mdi-cloud-upload"></i></th>
    <th class="c1" title="Leechers"><i class="mdi mdi-cloud-download"></i></th>
    <th class="c3"><i class="mdi mdi-update"></i> Refresh in</th>
    <th class="c1"><!--Actions buttons--></th>
  </tr></thead><tbody id="content">
    <tr>
      <td><a href="javascript:torrent('HASH')"><i class="mdi mdi-file"></i> Ubuntu</a></td><td align="right">1.6 GB</td><!--or mdi-folder if torrent with multiple files-->
      <td align="right">864.2 KB/s</td>
      <td>64</td><td>8</td>
      <td></td>
      <td><a href="javascript:toggle('HASH')" class="is-success"><i class="mdi mdi-toggle-switch"></i></a>
          <a href="javascript:remove('HASH')" class="is-danger"><i class="mdi mdi-delete-forever"></i></a></td>
    </tr>

  </tbody></table>
  
  
  

  <i class="mdi mdi-file-multiple" title="File count"></i>mdi-folder-multiple mdi-folder mdi-folder-open
  mdi-grid (chunks)
  mdi-information
  
</div>
<div class="modal" id="configuration">
  <div class="modal-background"></div><div class="modal-card">
    <header class="modal-card-head"><p class="modal-card-title">Configuration</p><a href="javascript:configuration()" class="delete" aria-label="close"></a></header>
    <section class="modal-card-body">
      <!-- Content ... -->
      Client
      Max upload speed
      Upload if no seeder
    </section>
    <footer class="modal-card-foot"><button class="button is-success">Save changes</button><button class="button">Cancel</button></footer>
  </div>
</div>
<script>
var socket=new WebSocket((window.location.protocol.toLowerCase()=='http'?'ws://':'ws://')+window.location.host);
socket.onerror=function(error) {console.log('WebSocket Error: '+error);};
socket.onopen=function(event) {console.log('Connected to: '+event.currentTarget.url);};
// Handle messages sent by the server.
socket.onmessage = function(event) {
  //var message = event.data;
  //messagesList.innerHTML += '<li class="received"><span>Received:</span>' + message + '</li>';
};
socket.onclose = function(event) {console.log('Disconnected from WebSocket.');};
function start_stop() {socket.send("toggle-start");}
function update() {socket.send("update");}
function apply_configuration() {
  //TODO
}
function configuration() {document.getElementById("configuration").classList.toggle("is-active");}
document.onkeydown = function(evt) {
  evt = evt || window.event;
  if (evt.keyCode == 27) {document.getElementById("configuration").classList.remove("is-active");}
};
window.onbeforeunload = function() {
  socket.onclose = function () {};
  socket.close();
};
function bytes_to_Size(bytes) {
  if (bytes==0) return '0 B';
  var i=parseInt(Math.floor(Math.log(bytes)/Math.log(1024)));
  return Math.round(bytes/Math.pow(1024, i), 2)+' '+['B', 'KB', 'MB', 'GB', 'TB'][i];
}
</script>
</body>
</html>